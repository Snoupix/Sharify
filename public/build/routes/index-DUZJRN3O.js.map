{
  "version": 3,
  "sources": ["../../../app/routes/index.tsx"],
  "sourcesContent": ["import { useEffect, useState } from \"react\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport type { ActionFunction } from \"@remix-run/node\";\nimport { Link, useSubmit } from \"@remix-run/react\";\n\nimport Title from \"~/components/title\";\nimport Spotify from \"~/utils/spotify\";\nimport { unsetSessionData } from \"~/server/session.server\";\nimport { GetStorageValue } from \"~/utils/utils\";\n\nexport const action: ActionFunction = async ({\n\trequest\n}) => {\n\tconst formData = await request.formData();\n\tconst deleteSTokens = formData.get('DeleteSpotifyTokens') as string || false;\n\n\tif (deleteSTokens) {\n\t\treturn await unsetSessionData(request, \"SpotifyTokens\", \"/\");\n\t}\n\t\n\treturn null;\n}\n\nexport default function Index() {\n\tconst submit = useSubmit();\n\tconst [spotifyUser, setSpotifyUser] = useState<SpotifyApi.CurrentUsersProfileResponse | null>(null);\n\n\tuseEffect(() => {\n\t\tif (Spotify.isReady) {\n\t\t\t(async () => {\n\t\t\t\tconst profile = await Spotify.GetProfile();\n\n\t\t\t\tif (!(profile instanceof Error)) {\n\t\t\t\t\tsetSpotifyUser(profile);\n\t\t\t\t}\n\t\t\t})()\n\t\t} else if (GetStorageValue(\"st\") != null && !Spotify.isReady) {\n\t\t\t(async () => {\n\t\t\t\tconst profile = await Spotify.GetProfile();\n\n\t\t\t\tif (!(profile instanceof Error)) {\n\t\t\t\t\tsetSpotifyUser(profile);\n\t\t\t\t}\n\t\t\t})()\n\t\t}\n\t}, [])\n\n\tconst handleSpotifyDisconnect = () => {\n\t\ttoast(`[Spotify] Disconnected from ${spotifyUser?.display_name} !`, {\n\t\t\tposition: \"bottom-right\",\n\t\t\tautoClose: 2500,\n\t\t\thideProgressBar: false,\n\t\t\tcloseOnClick: true,\n\t\t\tpauseOnHover: true,\n\t\t\tdraggable: true,\n\t\t\ttheme: \"light\",\n\t\t});\n\t\t\n\t\tsubmit({ DeleteSpotifyTokens: \"true\" }, { method: \"post\" });\n\n\t\tSpotify.Disconnect();\n\t\tsetSpotifyUser(null);\n\t}\n\t\n\treturn (\n\t\t<>\n\t\t\t<nav className=\"fixed top-0 left-0 h-14 w-screen\">\n\n\t\t\t</nav>\n\t\t\t<div className=\"h-screen flex flex-col justify-center items-center content-center gap-y-4 md:gap-y-6 xl:gap-y-9\">\n\t\t\t\t<Title />\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"duration-300 p-main-btn md:t-main-btn xl:main-btn hover:shadow-around hover:shadow-main-color hover:border-bg-color\"\n\t\t\t\t\tto=\"/host\"\n\t\t\t\t\tdata-cy=\"host-link\"\n\t\t\t\t>\n\t\t\t\t\tHost\n\t\t\t\t</Link>\n\t\t\t\t<Link\n\t\t\t\t\tclassName=\"duration-300 p-main-btn md:t-main-btn xl:main-btn hover:shadow-around hover:shadow-main-color hover:border-bg-color\"\n\t\t\t\t\tto=\"/client\"\n\t\t\t\t\tdata-cy=\"client-link\"\n\t\t\t\t>\n\t\t\t\t\tClient\n\t\t\t\t</Link>\n\t\t\t\t{spotifyUser ? (\n\t\t\t\t\t<div data-cy=\"horizontal-bar\" className=\"border-t-[1px] border-indigo-700 w-[20%]\"></div>\n\t\t\t\t) : null}\n\t\t\t\t{spotifyUser ? (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"duration-300 p-main-btn md:t-main-btn xl:main-btn hover:shadow-around hover:shadow-main-color hover:border-bg-color\"\n\t\t\t\t\t\tonClick={handleSpotifyDisconnect}\n\t\t\t\t\t\tdata-cy=\"disconnect-btn\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"text-xl xl:text-2xl\">{`Disconnect from ${spotifyUser.display_name}`}</span>\n\t\t\t\t\t</button>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t<ToastContainer />\n\t\t</>\n\t);\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAAA,mBAAoC;AAOpC,qBAAiC;AA0D/B;AA1Ca,SAAR,QAAyB;AAC/B,QAAM,SAAS,UAAU;AACzB,QAAM,CAAC,aAAa,cAAc,QAAI,uBAAwD,IAAI;AAElG,8BAAU,MAAM;AACf,QAAI,eAAQ,SAAS;AACpB,OAAC,YAAY;AACZ,cAAM,UAAU,MAAM,eAAQ,WAAW;AAEzC,YAAI,EAAE,mBAAmB,QAAQ;AAChC,yBAAe,OAAO;AAAA,QACvB;AAAA,MACD,GAAG;AAAA,IACJ,WAAW,gBAAgB,IAAI,KAAK,QAAQ,CAAC,eAAQ,SAAS;AAC7D,OAAC,YAAY;AACZ,cAAM,UAAU,MAAM,eAAQ,WAAW;AAEzC,YAAI,EAAE,mBAAmB,QAAQ;AAChC,yBAAe,OAAO;AAAA,QACvB;AAAA,MACD,GAAG;AAAA,IACJ;AAAA,EACD,GAAG,CAAC,CAAC;AAEL,QAAM,0BAA0B,MAAM;AACrC,MAAM,+BAA+B,2CAAa,kBAAkB;AAAA,MACnE,UAAU;AAAA,MACV,WAAW;AAAA,MACX,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,cAAc;AAAA,MACd,WAAW;AAAA,MACX,OAAO;AAAA,IACR,CAAC;AAED,WAAO,EAAE,qBAAqB,OAAO,GAAG,EAAE,QAAQ,OAAO,CAAC;AAE1D,mBAAQ,WAAW;AACnB,mBAAe,IAAI;AAAA,EACpB;AAEA,SACC,sFACC;AAAA,uDAAC,SAAI,WAAU,sCAAf;AAAA;AAAA;AAAA;AAAA,WAEA;AAAA,IACA,mDAAC,SAAI,WAAU,mGACd;AAAA,yDAAC,WAAD;AAAA;AAAA;AAAA;AAAA,aAAO;AAAA,MACP;AAAA,QAAC;AAAA;AAAA,UACA,WAAU;AAAA,UACV,IAAG;AAAA,UACH,WAAQ;AAAA,UACR;AAAA;AAAA,QAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACA,WAAU;AAAA,UACV,IAAG;AAAA,UACH,WAAQ;AAAA,UACR;AAAA;AAAA,QAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA;AAAA,MACC,cACA,mDAAC,SAAI,WAAQ,kBAAiB,WAAU,8CAAxC;AAAA;AAAA;AAAA;AAAA,aAAmF,IAChF;AAAA,MACH,cACA;AAAA,QAAC;AAAA;AAAA,UACA,WAAU;AAAA,UACV,SAAS;AAAA,UACT,WAAQ;AAAA,UAER,6DAAC,UAAK,WAAU,uBAAuB,6BAAmB,YAAY,kBAAtE;AAAA;AAAA;AAAA;AAAA,iBAAqF;AAAA;AAAA,QALtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMA,IACG;AAAA,SA3BL;AAAA;AAAA;AAAA;AAAA,WA4BA;AAAA,IACA,mDAAC,OAAD;AAAA;AAAA;AAAA;AAAA,WAAgB;AAAA,OAjCjB;AAAA;AAAA;AAAA;AAAA,SAkCA;AAEF;",
  "names": []
}
